### Построение плоских полиномиальных кривых

Полиномиальная кривая неспроста имеет такое название – в ее основе лежат _полиномы_, по которым и рисует такая кривая. Мой вариант работы заключался в построении сплайна непрерывной кривизны по трем точкам у которого, как и у других _сплайнов_, есть ряд условий построений: 

1)	В точках стыках _сегментов_ (часть кривой между двумя соседними точками, которая строится по собственному полиному) первая и вторая производные равны.

2)	Для крайних точек пользователь собственноручно задает производные.

Так же стоит помнить, что в точках стыков сегментов значения координат – равные, иначе получился бы набор кривых хаотично расположенных на экране. Кроме того, уравнение каждого сегмента представляется в виде системы _параметрических уравнений_, и параметр этих уравнений принимает значения от 0 до 1

В итоге для построения сплайна нужно решить _систему уравнений_, найти коэффициенты полином всех сегментов и затем визуализировать его.

### GIF

![](lab7.gif)

### Принципы работы

Алгоритм работы состоит из нескольких шагов:

#### Обработка событий нажатия клавиш и взаимодействия с виджетом

У spinewidget который наследован от QWidget переопределено несколько функций отвечающих за взаимодействие виджета с пользователем : ```mousePressEvent(QMouseEvent* e)```, ```mouseMoveEvent(QMouseEvent* e)```, ```mouseReleaseEvent(QMouseEvent* e)```. С помощью этих событий осуществляется общение программы и пользователя, например: можно добавить точку сплайна нажатием на виджет, перенести ее или полностью очистить виджет нажатием на Delete

_Пример реализации события нажатия на виджет_

```c++
void SplineWidget::mousePressEvent(QMouseEvent* e){
    if(e->buttons()  == Qt::LeftButton){
        if(!spline.add(QPointF(centrizePointCord(cordsOnCenter(e->pos()))))){
            selectedPoint = spline.findPointOrRail(centrizePointCord(cordsOnCenter(e->pos())));
            if(selectedPoint != spline.getPoints().end()){
                isSelected = true;
                if(!isCatch(selectedPoint->getRail().x()+selectedPoint->x(),
                           selectedPoint->getRail().y()+selectedPoint->y(),
                           centrizePointCord(cordsOnCenter(e->pos())).x(),
                           centrizePointCord(cordsOnCenter(e->pos())).y())){
                    isRailSelected = false;
                } else {
                    isRailSelected = true;
                }
            }
        }
    }
}
```

#### Вычисления cплайна

Вычисление сплайна возможно только тогда, когда известны все три точки сплайна и две производные на его концах, тогда вызывается метод, в котором запрограммировано решение системы уравнений.

#### Визуализация

Зная, что полиномы нормализированы и принимают значения от 0 до 1, можно задав точность отрисовки, вычислять точки полиномов и соединять их линиями. 
